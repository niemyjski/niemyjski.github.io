<!doctype html><html lang=en><head><link rel=preconnect href=https://fonts.googleapis.com crossorigin><link rel=preconnect href=https://use.fontawesome.com crossorigin><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preconnect href=https://cdnjs.cloudflare.com crossorigin><link rel=preconnect href=https://www.google-analytics.com crossorigin><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blakeniemyjski.com\/"},"articleSection":"blog","name":"How-to: Using NFC Tags to trigger device or home automations","headline":"How-to: Using NFC Tags to trigger device or home automations","description":"This post will cover how I use NFC tags with Home Assistant to trigger automations. I\u0026rsquo;ve laid out all the information below on how you can use NFC Tags to automate other apps and devices as well!\nI really like using Near Field Communication (NFC) for home or device based automations because it is really cheap and the possibilities are endless as you can place them in any environmental condition and on almost any physical object.","inLanguage":"en","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"19190","datePublished":"2020-07-19 08:11:00 -0500 -0500","dateModified":"2020-07-19 08:11:00 -0500 -0500","url":"https:\/\/blakeniemyjski.com\/blog\/how-to-using-nfc-tags-to-trigger-device-or-home-automation\/","wordCount":"2188","keywords":["Automation","Home Assistant","Near Field Communication","NFC","NFC Tag","NFC Tools","Universal link","Deep link","Stickers","Blog"]}</script><title>How-to: Using NFC Tags to trigger device or home automations</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.79.0"><meta name=description content="Blake Niemyjski"><meta name=twitter:card content="summary"><meta name=twitter:title content="How-to: Using NFC Tags to trigger device or home automations"><meta name=twitter:description content="This post will cover how I use NFC tags with Home Assistant to trigger automations. I&rsquo;ve laid out all the information below on how you can use NFC Tags to automate other apps and devices as well!
I really like using Near Field Communication (NFC) for home or device based automations because it is really cheap and the possibilities are endless as you can place them in any environmental condition and on almost any physical object."><meta name=twitter:site content="@blaken"><meta property="og:title" content="How-to: Using NFC Tags to trigger device or home automations"><meta property="og:description" content="This post will cover how I use NFC tags with Home Assistant to trigger automations. I&rsquo;ve laid out all the information below on how you can use NFC Tags to automate other apps and devices as well!
I really like using Near Field Communication (NFC) for home or device based automations because it is really cheap and the possibilities are endless as you can place them in any environmental condition and on almost any physical object."><meta property="og:type" content="article"><meta property="og:url" content="https://blakeniemyjski.com/blog/how-to-using-nfc-tags-to-trigger-device-or-home-automation/"><meta property="article:published_time" content="2020-07-19T08:11:00-05:00"><meta property="article:modified_time" content="2020-07-19T08:11:00-05:00"><meta property="og:image" content="https://blakeniemyjski.com//images/logo.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="512"><meta property="og:image:height" content="512"><meta itemprop=name content="How-to: Using NFC Tags to trigger device or home automations"><meta itemprop=description content="This post will cover how I use NFC tags with Home Assistant to trigger automations. I&rsquo;ve laid out all the information below on how you can use NFC Tags to automate other apps and devices as well!
I really like using Near Field Communication (NFC) for home or device based automations because it is really cheap and the possibilities are endless as you can place them in any environmental condition and on almost any physical object."><meta itemprop=datePublished content="2020-07-19T08:11:00-05:00"><meta itemprop=dateModified content="2020-07-19T08:11:00-05:00"><meta itemprop=wordCount content="2188"><meta itemprop=keywords content="Automation,Home Assistant,Near Field Communication,NFC,NFC Tag,NFC Tools,Universal link,Deep link,Stickers,"><link rel=preload as=style href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700&display=swap" media=print onload="this.media='all'"><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700&display=swap"></noscript><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.0/css/all.css><link rel=stylesheet href=https://blakeniemyjski.com/css/main.css><link href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.1/styles/vs.min.css rel=stylesheet type=text/css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-3422587-1','auto');ga('send','pageview');}</script></head><body><div id=wrapper><header id=header><h1><a href=https://blakeniemyjski.com/>blog</a></h1><nav class=links><ul><li><a href=https://blakeniemyjski.com/><i class="fas fa-home"></i>&nbsp;Home</a></li><li><a href=https://blakeniemyjski.com/categories/home-automation/><i class="fas fa-magic"></i>&nbsp;Home Automation</a></li><li><a href=https://blakeniemyjski.com/categories/programming/><i class="fas fa-code"></i>&nbsp;Programming</a></li><li><a href=https://blakeniemyjski.com/categories/review/><i class="fas fa-book"></i>&nbsp;Reviews</a></li><li><a href=https://blakeniemyjski.com/categories/public-speaking/><i class="fas fa-comments"></i>&nbsp;Public Speaking</a></li><li><a href=https://blakeniemyjski.com/about/><i class="fas fa-id-card"></i>&nbsp;About</a></li></ul></nav><nav class=main><ul><li id=share-nav class=share-menu style=display:none><a class=fa-share-alt href=#share-menu>Share</a></li><li class=search><a class=fa-search href=#search>Search</a><form id=search method=get action=//google.com/search><input type=text name=q placeholder=Search aria-label=Search>
<input type=hidden name=as_sitesearch value=https://blakeniemyjski.com/></form></li><li class=menu><a class=fa-bars href=#menu>Menu</a></li></ul></nav></header><section id=menu><section><form class=search method=get action=//google.com/search><input type=text name=q placeholder=Search>
<input type=hidden name=as_sitesearch value=https://blakeniemyjski.com/></form></section><section><ul class=links><li><a href=https://blakeniemyjski.com/><h3><i class="fas fa-home"></i>&nbsp;Home</h3></a></li><li><a href=https://blakeniemyjski.com/categories/home-automation/><h3><i class="fas fa-magic"></i>&nbsp;Home Automation</h3></a></li><li><a href=https://blakeniemyjski.com/categories/programming/><h3><i class="fas fa-code"></i>&nbsp;Programming</h3></a></li><li><a href=https://blakeniemyjski.com/categories/review/><h3><i class="fas fa-book"></i>&nbsp;Reviews</h3></a></li><li><a href=https://blakeniemyjski.com/categories/public-speaking/><h3><i class="fas fa-comments"></i>&nbsp;Public Speaking</h3></a></li><li><a href=https://blakeniemyjski.com/about/><h3><i class="fas fa-id-card"></i>&nbsp;About</h3></a></li></ul></section><section class=recent-posts><div class=mini-posts><header><h3>Recent Posts</h3></header><article class=mini-post><header><h3><a href=https://blakeniemyjski.com/blog/disturbing-trends-in-smart-home-products-and-services/>Disturbing trends in smart home products and service</a></h3><time class=published datetime=2020-12-02>December 2, 2020</time></header></article><article class=mini-post><header><h3><a href=https://blakeniemyjski.com/blog/securing-smart-home-devices-with-esphome-and-home-assistant/>Securing smart home devices with ESPHome and Home Assistant</a></h3><time class=published datetime=2020-10-17>October 17, 2020</time></header></article><article class=mini-post><header><h3><a href=https://blakeniemyjski.com/blog/building-and-maintaining-a-smart-home-presentation/>Building and maintaining a smart home presentation</a></h3><time class=published datetime=2020-08-25>August 25, 2020</time></header></article><article class=mini-post><header><h3><a href=https://blakeniemyjski.com/blog/speaking-at-north-dallas-developers/>Speaking at North Dallas Developers</a></h3><time class=published datetime=2020-08-04>August 4, 2020</time></header></article><a href=/categories/ class=button>View more posts</a></div></section></section><section id=share-menu><section id=social-share-nav><ul class=links><header><h3>Share this post <i class="fas fa-smile"></i></h3></header><li><a href="//twitter.com/share?url=https%3a%2f%2fblakeniemyjski.com%2fblog%2fhow-to-using-nfc-tags-to-trigger-device-or-home-automation%2f&text=How-to%3a%20Using%20NFC%20Tags%20to%20trigger%20device%20or%20home%20automations&via=blaken" target=_blank rel=noopener class="share-btn twitter" aria-label="Share To Twitter"><i class="fab fa-twitter"></i><p>Twitter</p></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblakeniemyjski.com%2fblog%2fhow-to-using-nfc-tags-to-trigger-device-or-home-automation%2f" target=_blank rel=noopener class="share-btn facebook" aria-label="Share To Facebook"><i class="fab fa-facebook"></i><p>Facebook</p></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2fblakeniemyjski.com%2fblog%2fhow-to-using-nfc-tags-to-trigger-device-or-home-automation%2f&title=How-to%3a%20Using%20NFC%20Tags%20to%20trigger%20device%20or%20home%20automations" target=_blank rel=noopener class="share-btn reddit" aria-label="Share To Reddit"><i class="fab fa-reddit-alien"></i><p>Reddit</p></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fblakeniemyjski.com%2fblog%2fhow-to-using-nfc-tags-to-trigger-device-or-home-automation%2f&title=How-to%3a%20Using%20NFC%20Tags%20to%20trigger%20device%20or%20home%20automations" target=_blank rel=noopener class="share-btn linkedin" aria-label="Share To LinkedIn"><i class="fab fa-linkedin"></i><p>LinkedIn</p></a></li><li><a href="mailto:?subject=Check out this post by &body=https%3a%2f%2fblakeniemyjski.com%2fblog%2fhow-to-using-nfc-tags-to-trigger-device-or-home-automation%2f" target=_blank rel=noopener class="share-btn email" aria-label="Share To Email"><i class="fas fa-envelope"></i><p>Email</p></a></li></ul></section></section><div id=main><article class=post><header><div class=title><h1><a href=https://blakeniemyjski.com/blog/how-to-using-nfc-tags-to-trigger-device-or-home-automation/>How-to: Using NFC Tags to trigger device or home automations</a></h1></div><div class=meta><time class=published datetime=2020-07-19>July 19, 2020</time>
<span class=author></span><p>11 minute read</p></div></header><section id=social-share><ul class=icons><li><a href="//twitter.com/share?url=https%3a%2f%2fblakeniemyjski.com%2fblog%2fhow-to-using-nfc-tags-to-trigger-device-or-home-automation%2f&text=How-to%3a%20Using%20NFC%20Tags%20to%20trigger%20device%20or%20home%20automations&via=blaken" target=_blank rel=noopener class="share-btn twitter" aria-label="Share To Twitter"><i class="fab fa-twitter"></i><p>Twitter</p></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblakeniemyjski.com%2fblog%2fhow-to-using-nfc-tags-to-trigger-device-or-home-automation%2f" target=_blank rel=noopener class="share-btn facebook" aria-label="Share To Facebook"><i class="fab fa-facebook"></i><p>Facebook</p></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2fblakeniemyjski.com%2fblog%2fhow-to-using-nfc-tags-to-trigger-device-or-home-automation%2f&title=How-to%3a%20Using%20NFC%20Tags%20to%20trigger%20device%20or%20home%20automations" target=_blank rel=noopener class="share-btn reddit" aria-label="Share To Reddit"><i class="fab fa-reddit-alien"></i><p>Reddit</p></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fblakeniemyjski.com%2fblog%2fhow-to-using-nfc-tags-to-trigger-device-or-home-automation%2f&title=How-to%3a%20Using%20NFC%20Tags%20to%20trigger%20device%20or%20home%20automations" target=_blank rel=noopener class="share-btn linkedin" aria-label="Share To LinkedIn"><i class="fab fa-linkedin"></i><p>LinkedIn</p></a></li><li><a href="mailto:?subject=Check out this post by &body=https%3a%2f%2fblakeniemyjski.com%2fblog%2fhow-to-using-nfc-tags-to-trigger-device-or-home-automation%2f" target=_blank rel=noopener class="share-btn email" aria-label="Share To Email"><i class="fas fa-envelope"></i><p>Email</p></a></li></ul></section><div id=content><p>This post will cover how I use <a href=https://electronics.howstuffworks.com/nfc-tag1.htm>NFC tags</a>
with <a href=https://www.home-assistant.io>Home Assistant</a> to trigger automations.
I&rsquo;ve laid out all the information below on how you can use NFC Tags to automate
other apps and devices as well!</p><p>I really like using <a href=https://en.wikipedia.org/wiki/Near-field_communication>Near Field Communication (NFC)</a>
for home or device based automations because it is really cheap and the
possibilities are endless as you can place them in any environmental condition
and on almost any physical object.</p><p>Here are some of the ways you could use NFC Tags to trigger home automations:</p><ul><li>Place a tag next to your bed to activate good morning/night routines.</li><li>Place a tag next to a door to automatically unlock a door (presence detection is hard).</li><li>Place a tag on the lawn mower and have an automation to open the Garage Door.</li><li>Place a tag under a bed to trigger an emergency action like trigger alarm.</li><li>Place a tag outside next to patio furniture to turn on lights or music.</li><li>Place a tag next to a lamp with a smart bulb to turn it on or off.</li><li>Place a tag next to the cat litter to trigger a future reminder to change it.</li></ul><p>Here are some of the ways you could use NFC Tags to trigger device automations:</p><ul><li>Sharing Guest Wifi information!</li><li>Place under a bed to trigger an emergency action like text emergency services.</li><li>Place a tag by your relaxation place and automatically play relaxing music.</li><li>Put one on your bag and tap it to trigger airplane mode or silence your phone.</li></ul><blockquote><p>A huge shout out to <a href=https://www.architectryan.com/>Ryan Hoffman</a> who inspired
me to look into using NFC after sharing his experiences with it. I&rsquo;m not sure
I would have stumbled upon NFC Tags otherwise.</p></blockquote><h2 id=what-tag-should-i-get>What Tag Should I Get?</h2><p>There are many different types of <a href=https://electronics.howstuffworks.com/nfc-tag1.htm>NFC tags</a>
that have different form factors, features (write locking, password protection,
number of writes, etc).</p><p>I really like these <a href="https://www.amazon.com/gp/product/B015EM34WY?tag=niemyjski-20">heavy duty Type 2 NFC Tags</a>
as they are waterproof, safe for outdoor use and supports all of the NFC
features you&rsquo;d expect (locking, multi-write, password protection). Additionally,
they come with 3M adhesive backing so you can literally stick them anywhere!</p><p><img src=https://blakeniemyjski.com/img/blog/home-automation/nfc-tag-door-lock-700.png alt="NFC Tag Near Door"></p><blockquote><p>I could have done more research and found a tag that blended in better with my
door, please keep this in mind when picking out where you want to place these.</p></blockquote><p>You can get NFC Tags in
<a href="https://www.amazon.com/gp/product/B015UMPVNI?tag=niemyjski-20">sticker form</a>
as well. Just be sure it supports your all of your requirements. Here are some
factors you might want to consider:</p><ul><li>Location: Some tags are not waterproof and some don&rsquo;t work on metal surfaces.</li><li>Device support: Will this work with the devices I want to use it with (e.g., iPhone).</li><li>Updatable: Do you need to update this tag once installed (eg., Can I lock it, or write to it multiple times)?</li><li>Form Factor: Does this need to be a <a href="https://www.amazon.com/gp/product/B015UMPVNI?tag=niemyjski-20">sticker</a>?</li><li>Color: Does this blend in with the surrounding?</li></ul><h2 id=nfc-tag-tips>NFC Tag Tips</h2><p>It&rsquo;s important to note that you should associate a name or identifier to a tag
or to the event name you trigger. I&rsquo;d <strong>strongly recommend</strong> creating tags with
sequentially or with random characters like <code>nfc_tag_1</code> and not with a specific
name like <code>office_lights_tag</code>. The reason behind this is this because you can:</p><ul><li>Potentially leak information publicly as it can be read by anyone with an NFC device.</li><li>Prevents you from reusing tags at a later date.</li></ul><p>Finally, don&rsquo;t store anything you don&rsquo;t publicly want exposed (e.g., api keys,
IP addresses, &mldr;). Tags can be copied / cloned with enough work. I&rsquo;ve yet to
figure out how to encrypt the payload of a tag but I&rsquo;ve seen encrypted tags
mentioned around in my various searches. Even still I wouldn&rsquo;t put anything
sensitive on a tag!</p><h2 id=triggering-events-when-nfc-is-detected>Triggering events when NFC is detected.</h2><p>I&rsquo;m pretty new to NFC but in my adventures I&rsquo;ve only come across two ways to
trigger Home Assistant events when an NFC Tag is detected. You can do it via
the Shortcuts App or via <a href=https://en.wikipedia.org/wiki/Deep_linking>deep</a>/universal
linking.</p><blockquote><p>This article primarily focuses on iOS support as I don&rsquo;t have any android
devices to try on. The following links may need to be slightly tweaked.
Please leave a comment below on what worked for you and I&rsquo;ll update this article.</p></blockquote><p>Please note that there are deep links for a wide range of
<a href=http://x-callback-url.com/apps/>applications</a> that you could use NFC tags on.</p><blockquote><p>Skip to the <a href=#conclusion>Conclusion</a> if you are looking for my recommendations
on what solution to go with.</p></blockquote><h3 id=deepuniversal-links>Deep/Universal links</h3><p>For simplicity sake a deep/universal link will open an application with some
arguments contained in the link of which can trigger an action. You can read
more about the differences <a href=https://stackoverflow.com/questions/35522618/universal-links-on-ios-vs-deep-links-url-schemes>here</a>.</p><p>You can do a <a href=https://companion.home-assistant.io/docs/integrations/url-handler/>wide range of actions</a>
with links like Call Services, Fire Events or Send a Location.</p><p>The advantage of using Deep/Universal links is it allows any authorized
user to execute a Home Assistant action with no configuration defined on
device.</p><h4 id=deep-link>Deep link</h4><p>The following Deep link <a href=homeassistant://fire_event/nfc_tag_1><code>homeassistant://fire_event/nfc_tag_1</code></a>
will launch the Home Assistant application if it&rsquo;s installed, fire an event
called <code>nfc_tag_1</code> and show an alert dialog saying the <code>nfc_tag_1</code> event has
been called.</p><p><img src=https://blakeniemyjski.com/img/blog/home-automation/home-assistant-ios-app-fired-event-397.png alt="Fired Event"></p><p>This is less than ideal as you don&rsquo;t really want a notification interrupting you.
The application opening is jarring enough.</p><h4 id=deep-link-without-notification>Deep link without notification</h4><p>Luckily we can take advantage of a feature called
<a href=https://companion.home-assistant.io/docs/integrations/x-callback-url><code>x-callback-url</code></a>.
This allows us to trigger application actions without a notification. We simply
need to modify the url to
<a href="homeassistant://x-callback-url/fire_event?eventName=nfc_tag_1"><code>homeassistant://x-callback-url/fire_event?eventName=nfc_tag_1</code></a></p><h4 id=universal-link>Universal link</h4><p>Deep links work great as long as the application you are linking to is installed.
If it isn&rsquo;t, than the link will do nothing. This is one of the problems
<a href=https://companion.home-assistant.io/docs/integrations/universal-links>Universal links</a>
solve by redirecting you to the App Store if the application isn&rsquo;t
currently installed.</p><blockquote><p>NOTE: Universal links like <a href=https://www.home-assistant.io/ios/nfc/>https://www.home-assistant.io/ios/nfc/</a> are
registered when you install the application and works offline!</p></blockquote><p>Here is the Universal link you&rsquo;d need to register
<a href="https://www.home-assistant.io/ios/nfc/?url=homeassistant://x-callback-url/fire_event?eventName=nfc_tag_1"><code>https://www.home-assistant.io/ios/nfc/?url=homeassistant://x-callback-url/fire_event?eventName=nfc_tag_1</code></a>
to fire the action without a notification.</p><h4 id=writing-links-to-nfc-tag>Writing links to NFC Tag</h4><p>I used the free application called <a href=https://apps.apple.com/us/app/nfc-tools/id1252962749>NFC Tools</a>
which is also available on the <a href="https://play.google.com/store/apps/details?id=com.wakdev.wdnfc&hl=en_US">Google Play Store</a>.</p><p>Open the application and follow the steps below:</p><ol><li>Select the <code>Write</code> button.</li><li>Select the <code>Add a record</code> button.</li><li>Select the <code>URL / URI</code> option.</li><li>Enter in your Deep/Universal link and select <code>OK</code>.</li><li>Select the <code>Write / xx Bytes</code> button to write the link to the NFC Tag.</li></ol><p><img src=https://blakeniemyjski.com/img/blog/home-automation/nfc-tools-write-record-1200.png alt=Write></p><p>When your phone gets close to the NFC tag it will launch a banner prompting
you to click on it to activate the event.</p><p><img src=https://blakeniemyjski.com/img/blog/home-automation/home-assistant-nfc-tag-banner-1192.jpeg alt="Open in Home Assistant NFC Tag"></p><p>This isn&rsquo;t ideal but it&rsquo;s in place for
<a href=https://developer.apple.com/documentation/corenfc/adding_support_for_background_tag_reading>security reasons</a>
so your phone doesn&rsquo;t automatically execute tasks.</p><h3 id=shortcuts>Shortcuts</h3><p><a href=https://apps.apple.com/us/app/shortcuts/id1462947752>Shortcuts</a> is an iOS
application made by apple that allows you do device based tasks or automations
much like <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm&hl=en_US">Tasker</a>
on Android.</p><p>Shortcuts define tasks and automations in the app that can get triggered several
ways. Shortcut tasks can be shared across devices easily. However Shortcuts
Automations cannot be shared and is currently the only way to trigger an
action when an NFC tag is detected without any prompts.</p><p>The nice thing about Shortcuts is you can have it automate anything (e.g.,
texting, application actions, video calling and more).</p><h4 id=shortcut>Shortcut</h4><p>There are two kind of Shortcuts you can create. The first is referred to a
Shortcut and can be shared or triggered from automations or by NFC Tags. The
second is called Shortcut Automations and those get triggered automatically
based on some kind of action or state like coming into proximity to a NFC Tag.
Shortcut Automations cannot currently be shared as of iOS 13.</p><h5 id=creating-a-new-shortcut>Creating a new Shortcut</h5><p>We first need to create a new Shortcut in order for a NFC tag to trigger it.</p><p>Open the Shortcuts application and follow the steps below:</p><ol><li>Select the <code>Create Shortcut</code> button.</li><li>Select the <code>Add Action</code> button.</li><li>Select the <code>Apps</code> button and select <code>Home Assistant</code>.</li><li>Select the <code>Fire Event</code> option.</li><li>Enter in the event name you wish to trigger (e.g., <code>nfc_tag_1</code>).</li><li>Select <code>Show More</code> and enter in <code>{}</code> for the <code>Event Data</code>.
<img src=https://blakeniemyjski.com/img/blog/home-automation/apple-new-shortcut-home-assistant-1200.png alt="New Shortcut"></li><li>Select the <code>Next</code> button.</li><li>Enter in the event name as the Shortcut name (e.g., <code>nfc_tag_1</code>).</li><li>Select the <code>Done</code> button to save the Shortcut.</li></ol><p>You can now select on the Shortcut button you just added to fire an event! We
can now write to an NFC Tag to tell it to run the Shortcut we just added when
the tag is read by our device.</p><h5 id=writing-shortcut-to-nfc-tag>Writing Shortcut to NFC Tag</h5><p>I used the free application called <a href=https://apps.apple.com/us/app/nfc-tools/id1252962749>NFC Tools</a>
to write the Shortcut to the NFC Tag.</p><p>Open the application and follow the steps below:</p><ol><li>Select the <code>Write</code> button.</li><li>Select the <code>Add a record</code> button.</li><li>Select the <code>Shortcut</code> option.</li><li>Enter in the name of the Shortcut and select <code>OK</code>.</li><li>Select the <code>Write / xx Bytes</code> button to write the link to the NFC Tag.</li></ol><p>When your phone gets close to the NFC tag it will launch a banner prompting
you to click on it to activate the event.</p><p><img src=https://blakeniemyjski.com/img/blog/home-automation/nfc-tools-nfc-tag-shortcuts-banner-1200.png alt="Open in ShortCuts NFC Tag"></p><p>This isn&rsquo;t ideal but it&rsquo;s in place for security reasons so your phone doesn&rsquo;t
automatically execute tasks.</p><h4 id=shortcuts-automations>Shortcuts Automations</h4><p>As stated previously, Automations are setup in the Shortcut apps and cannot be
shared across devices. Which means this will become a lot of work to maintain if
you have more than one user who will be using NFC Tag for automations. The plus
side is you don&rsquo;t need to write anything to the NFC Tag to use these automations
and they run without any user interaction. I think this is the biggest win of
this approach.</p><p>Open the Shortcuts application and follow the steps below:</p><ol><li>Select the Automation tab.</li><li>Select the <code>Add</code> icon button.</li><li>Select the <code>Create Personal Automation</code> button.</li><li>Select the <code>NFC</code> option under the <code>Settings Category</code>.</li><li>Select the <code>Scan</code> button and scan your NFC Tag.</li><li>Enter in the event name as the Shortcut name (e.g., <code>nfc_tag_1</code>).</li><li>Select the <code>Next</code> button.</li><li>Select the <code>Apps</code> button and select <code>Home Assistant</code>.</li><li>Select the <code>Fire Event</code> option.</li><li>Enter in the event name you wish to trigger (e.g., <code>nfc_tag_1</code>).</li><li>Select <code>Show More</code> and enter in <code>{}</code> for the <code>Event Data</code>.</li><li>Select the <code>Next</code> button.</li><li>Turn off <code>Ask Before Running</code>, unless you wish to be prompted.
<img src=https://blakeniemyjski.com/img/blog/home-automation/apple-new-shortcut-automation-home-assistant-1200.png alt="New Shortcut Automation"></li><li>Select the <code>Done</code> button to save the Automation.</li></ol><p>When your phone gets close to the NFC tag it will automatically fire the event.</p><h2 id=home-assistant-automation>Home Assistant Automation</h2><p>Here is a quick little Home Assistant Automation you can use that will get
triggered when your NFC Tag is read and the event is fired (e.g., <code>nfc_tag_1</code>).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>- <span style=color:#f92672>alias</span>: <span style=color:#ae81ff>Toggle light when event is nfc_tag_1 event is triggered</span>
  <span style=color:#f92672>trigger</span>:
  - <span style=color:#f92672>event_data</span>: {}
    <span style=color:#f92672>event_type</span>: <span style=color:#ae81ff>nfc_tag_1</span>
    <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>event</span>
  <span style=color:#f92672>action</span>:
  - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>light.turn_on</span>
    <span style=color:#f92672>data</span>:
      <span style=color:#f92672>entity_id</span>:
        - <span style=color:#ae81ff>light.office</span>
</code></pre></div><blockquote><p>Note: this automation can be created very easily in Home Assistant
Automations User Interface (UI).</p></blockquote><h2 id=future-plans>Future Plans</h2><p>Here are some of the things I want to try todo in the future that I think we
may need to address in Home Assistant if it&rsquo;s not already available.</p><p>I&rsquo;d like to find a way to ensure my tag can run from any device without leaking
implementation details on how to execute. I think this comes down to potentially
adding shared universal deep link that works on various platforms.</p><p>Taking this a step further, it would be really nice to have a named access
token that any user can access to preform an action. I think of this as a named
short link of which I define the action that it can perform server side
(e.g., turn on this light or fire this action). These could even be used to
anonymously share state as well! But this would expose your Home Assistance
instance in some way.</p><p>Some further research is needed to see if I can stack NFC Tag actions to have
multiple run at the same time or if only supported ones will be executed by
a specific device (e.g., If I put Shortcuts first, will it be skipped on
Android). This could be used to stack events that get fired or services called.</p><p>Finally, it would be nice to figure out how to encrypt my tags just so I can
learn more!</p><h2 id=conclusion>Conclusion</h2><p>I&rsquo;m going to be using the <a href=#universal-link>Universal Link</a> route with all my
tags as I define the configuration once on what the tag should do and anyone
authenticated with the Home Assistant app will be able to fire events.</p><p>I do think that <a href=#shortcuts-automations>Shortcut Automations</a> has the best user
experience by automatically triggering actions when NFC Tags are detected. But
they are not sharable/synced across devices or accounts makes this a non starter
unless you will always own a single Apple Device or you just love maintaining
automations long term. I do think I may use Shortcut Automations for some
automations of which extra interaction is not ideal like activating good night
routines without remembering to press on the banner.</p><p>NFC Tags can be used for Home Automation or even device specific tasks so go
wild!</p><h2 id=extra-reading>Extra reading</h2><p>Here are some useful links that I came across in my NFC adventures:</p><ul><li><a href=https://developer.apple.com/documentation/corenfc/adding_support_for_background_tag_reading>Adding Support for Background Tag Reading</a></li><li><a href=https://security.stackexchange.com/questions/63483/how-do-nfc-tags-prevent-copying>How do NFC tags prevent copying?</a></li><li><a href=https://github.com/SeanPM5/homeassistant-config/wiki/Apple-Shortcuts---Home-Assistant-iOS-Tutorial>Apple Shortcuts Home Assistant iOS Tutorial</a></li><li><a href=https://www.reddit.com/r/homeassistant/comments/cgqe52/multifunction_nfc_tags_with_home_assistant_and/eulvn13/>Multi-function NFC Tags with Home Assistant and Tasker</a></li></ul></div><footer><ul class=stats><li class=categories><ul><i class="fas fa-folder"></i><li><a class=article-category-link href=https://blakeniemyjski.com/categories/home-assistant>Home Assistant</a></li><li><a class=article-category-link href=https://blakeniemyjski.com/categories/home-automation>Home Automation</a></li></ul></li><li class=tags><ul><i class="fas fa-tags"></i><li><a class=article-category-link href=https://blakeniemyjski.com/tags/automation>Automation</a></li><li><a class=article-category-link href=https://blakeniemyjski.com/tags/home-assistant>Home Assistant</a></li><li><a class=article-category-link href=https://blakeniemyjski.com/tags/near-field-communication>Near Field Communication</a></li><li><a class=article-category-link href=https://blakeniemyjski.com/tags/nfc>NFC</a></li><li><a class=article-category-link href=https://blakeniemyjski.com/tags/nfc-tag>NFC Tag</a></li><li><a class=article-category-link href=https://blakeniemyjski.com/tags/nfc-tools>NFC Tools</a></li><li><a class=article-category-link href=https://blakeniemyjski.com/tags/universal-link>Universal link</a></li><li><a class=article-category-link href=https://blakeniemyjski.com/tags/deep-link>Deep link</a></li><li><a class=article-category-link href=https://blakeniemyjski.com/tags/stickers>Stickers</a></li></ul></li></ul></footer><div id=mailing-list><h3>Join the mailing list</h3>Get notified of new posts and related content to your inbox. I will never sell
you anything and I will NEVER sell your email address.<form class=email-form name=newsletter method=post data-netlify=true netlify-honeypot=bot-field><div hidden aria-hidden=true><label>Don't fill this out if you're human:
<input name=bot-field></label></div><label for=email>Your email address</label><div class=email-container><input type=email name=email placeholder=Email id=email required>
<button name=submit class=button type=submit id=subscribe>Subscribe</button></div></form></div></article><article class=post><div class=disqus></div><script>(function(){var disqus_shortname='niemyjski';window.disqusLoaderSettings={element:'.disqus',options:{scriptUrl:'//'+disqus_shortname+'.disqus.com/embed.js',disqusConfig:function(){this.page.url="https:\/\/blakeniemyjski.com\/blog\/how-to-using-nfc-tags-to-trigger-device-or-home-automation\/";this.page.identifier="https:\/\/blakeniemyjski.com\/blog\/how-to-using-nfc-tags-to-trigger-device-or-home-automation\/";}}};})();</script></article><ul class="actions pagination"><li><a href=https://blakeniemyjski.com/blog/how-to-normalize-home-volume-levels-with-node-red/ class="button big previous">How-to normalize home volume levels with Node-RED</a></li><li><a href=https://blakeniemyjski.com/blog/speaking-at-north-dallas-developers/ class="button big next">Speaking at North Dallas Developers</a></li></ul></div><section id=sidebar><section id=intro><a href=https://blakeniemyjski.com/><img src=https://blakeniemyjski.com/img/logo.jpeg class=intro-circle width=250 alt="Blake Niemyjski"></a><header><h2>Blake Niemyjski</h2><p>Passionate about building software</p></header><ul class=icons><li><a href=https://blakeniemyjski.com/index.xml type=application/rss+xml target=_blank title=RSS><i class="fas fa-rss"></i></a></li><li><a href=//github.com/niemyjski target=_blank title=GitHub><i class="fab fa-github"></i></a></li><li><a href=//stackoverflow.com/users/199701 target=_blank title="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li><li><a href=//linkedin.com/in/niemyjski target=_blank title=LinkedIn><i class="fab fa-linkedin"></i></a></li><li><a href=//reddit.com/user/bniemyjski target=_blank title=Reddit><i class="fab fa-reddit"></i></a></li><li><a href=//youtube.com/bniemyjski target=_blank title=YouTube><i class="fab fa-youtube"></i></a></li><li><a href=//instagram.com/blake.niemyjski target=_blank title=Instagram><i class="fab fa-instagram"></i></a></li><li><a href=//twitter.com/blaken target=_blank title=Twitter><i class="fab fa-twitter"></i></a></li><li><a href=mailto:bniemyjski@gmail.com title=Email><i class="fas fa-envelope"></i></a></li></ul></section><section class=recent-posts><div class=mini-posts><header><h3>Recent Posts</h3></header><div class=posts-container><article class=mini-post><header><h3><a href=https://blakeniemyjski.com/blog/disturbing-trends-in-smart-home-products-and-services/>Disturbing trends in smart home products and service</a></h3><time class=published datetime=2020-12-02>December 2, 2020</time></header></article><article class=mini-post><header><h3><a href=https://blakeniemyjski.com/blog/securing-smart-home-devices-with-esphome-and-home-assistant/>Securing smart home devices with ESPHome and Home Assistant</a></h3><time class=published datetime=2020-10-17>October 17, 2020</time></header></article><article class=mini-post><header><h3><a href=https://blakeniemyjski.com/blog/building-and-maintaining-a-smart-home-presentation/>Building and maintaining a smart home presentation</a></h3><time class=published datetime=2020-08-25>August 25, 2020</time></header></article><article class=mini-post><header><h3><a href=https://blakeniemyjski.com/blog/speaking-at-north-dallas-developers/>Speaking at North Dallas Developers</a></h3><time class=published datetime=2020-08-04>August 4, 2020</time></header></article></div><a href=/categories/ class=button>View more posts</a></div></section><section id=mini-bio><h3>About</h3><p>Blake Niemyjski is a full time open source software architect and private pilot. Since the late 90's, Blake's curiosity has been focused around developing software that helps the masses. As a hobbyist developer turned student and professional, Blake's passion is to further his knowledge and create technologies for the future.</p><a href=https://blakeniemyjski.com/about/ class=button>Learn More About Me</a></section><section id=footer><p class=copyright>&copy; 2020
Blake Niemyjski
.
Powered by <a href=//gohugo.io target=_blank rel=noreferrer>Hugo</a></p></section></section></div><a id=back-to-top href=# class="fas fa-arrow-up fa-border fa-2x"></a><script defer src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js></script><script defer src=https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js></script><script defer src=https://use.fontawesome.com/releases/v5.13.0/js/all.js></script><script defer src=https://blakeniemyjski.com/js/util.js></script><script defer src=https://blakeniemyjski.com/js/main.js></script><script defer src=https://blakeniemyjski.com/js/backToTop.js></script><script defer src=https://blakeniemyjski.com/js/disqusLoader.js></script><script defer src=https://blakeniemyjski.com/js/mailing-list.js></script><script defer src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.1/highlight.min.js></script><script defer src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.1/languages/vbnet.min.js></script><script defer src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.1/languages/dockerfile.min.js></script><script defer src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.1/languages/dos.min.js></script><script defer src=https://blakeniemyjski.com/js/init-highlight.js></script></body></html>